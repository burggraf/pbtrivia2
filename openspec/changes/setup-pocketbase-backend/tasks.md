# Implementation Tasks

## 1. PocketBase Initialization
- [ ] 1.1 Initialize PocketBase by running `./pocketbase serve` to create pb_data directory
- [ ] 1.2 Create admin superuser using `./pocketbase superuser create` or admin dashboard
- [ ] 1.3 Verify admin access to dashboard at http://127.0.0.1:8090/_/
- [ ] 1.4 Add pb_data/ to .gitignore (exclude database from version control)

## 2. Questions Collection Setup
- [ ] 2.1 Create questions collection via admin dashboard or migrations
- [ ] 2.2 Add all required fields with correct types:
  - [ ] id (text, autogenerated, 15 chars)
  - [ ] category (text, indexed)
  - [ ] subcategory (text)
  - [ ] difficulty (text)
  - [ ] question (text)
  - [ ] a, b, c, d (text fields)
  - [ ] metadata (json)
  - [ ] created, updated (datetime, auto)
- [ ] 2.3 Configure collection API rules:
  - [ ] List/View: `@request.auth.id != ""` (authenticated users only)
  - [ ] Create/Update/Delete: `@request.auth.role = "admin"` (admin only)

## 3. Data Migration Script
- [ ] 3.1 Create migration script (Node.js or Python) to read questions.tsv
- [ ] 3.2 Parse TSV with proper handling of quoted fields and tabs
- [ ] 3.3 Map TSV columns to PocketBase collection fields
- [ ] 3.4 Implement batch import (500-1000 records at a time for performance)
- [ ] 3.5 Add validation for required fields before import
- [ ] 3.6 Implement idempotent import (check for existing IDs, update vs create)
- [ ] 3.7 Add error handling and logging (count imported/skipped/failed records)

## 4. Testing and Validation
- [ ] 4.1 Run migration script and verify all ~61,257 questions imported
- [ ] 4.2 Verify category index performance with sample queries
- [ ] 4.3 Test API access rules:
  - [ ] Authenticated users can read questions
  - [ ] Unauthenticated requests are rejected
  - [ ] Non-admin users cannot modify questions
- [ ] 4.4 Verify data integrity (spot-check random questions, ensure "a" is correct answer)
- [ ] 4.5 Test idempotent import by running migration script twice

## 5. Documentation
- [ ] 5.1 Document PocketBase startup command and configuration
- [ ] 5.2 Document how to run the migration script
- [ ] 5.3 Add setup instructions to README or project docs
- [ ] 5.4 Document collection schema and API rules
